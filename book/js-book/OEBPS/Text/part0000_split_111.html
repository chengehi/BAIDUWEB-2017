<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>未知</title>
  <link href="../Styles/Style.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/custom.css" rel="stylesheet" type="text/css" />
</head>

<body class="calibre">
  <h2 class="calibre9" id="nav_point_123">16.3　媒体元素</h2>

  <p class="calibre2">随着音频和视频在Web上的迅速流行，大多数提供富媒体内容的站点为了保证跨浏览器兼容性，不得不选择使用Flash。HTML5新增了两个与媒体相关的标签，让开发人员不必依赖任何插件就能在网页中嵌入跨浏览器的音频和视频内容。这两个标签就是<code class="calibre15">&lt;audio&gt;</code>和<code class="calibre15">&lt;video&gt;</code>。</p>

  <p class="calibre2">这两个标签除了能让开发人员方便地嵌入媒体文件之外，都提供了用于实现常用功能的JavaScript API，允许为媒体创建自定义的控件。这两个元素的用法如下。</p>
  <pre class="calibre18"><code class="calibre15">&lt;!-- 嵌入视频 --&gt;
&lt;video src="conference.mpg" id="myVideo"&gt;Video player not available.&lt;/video&gt;

&lt;!-- 嵌入音频 --&gt;
&lt;audio src="song.mp3" id="myAudio"&gt;Audio player not available.&lt;/audio&gt;
</code></pre>

  <p class="calibre2">使用这两个元素时，至少要在标签中包含<code class="calibre15">src</code>属性，指向要加载的媒体文件。还可以设置<code class="calibre15">width</code>和<code class="calibre15">height</code>属性以指定视频播放器的大小，而为<code class="calibre15">poster</code>属性指定图像的URI可以在加载视频内容期间显示一幅图像。另外，如果标签中有<code class="calibre15">controls</code>属性，则意味着浏览器应该显示UI控件，以便用户直接操作媒体。位于开始和结束标签之间的任何内容都将作为后备内容，在浏览器不支持这两个媒体元素的情况下显示。</p>

  <p class="calibre2">因为并非所有浏览器都支持所有媒体格式，所以可以指定多个不同的媒体来源。为此，不用在标签中指定<code class="calibre15">src</code>属性，而是要像下面这样使用一或多个<code class="calibre15">&lt;source&gt;</code>元素。</p>
  <pre class="calibre18"><code class="calibre15">&lt;!-- 嵌入视频 --&gt;
&lt;video id="myVideo"&gt;
  &lt;source src="conference.webm" type="video/webm; codecs='vp8, vorbis'"&gt;
  &lt;source src="conference.ogv" type="video/ogg; codecs='theora, vorbis'"&gt;
  &lt;source src="conference.mpg"&gt;
  Video player not available.
&lt;/video&gt;

&lt;!-- 嵌入音频 --&gt;
&lt;audio id="myAudio"&gt;
  &lt;source src="song.ogg" type="audio/ogg"&gt;
  &lt;source src="song.mp3" type="audio/mpeg"&gt;
  Audio player not available.
&lt;/audio&gt;
</code></pre>

  <p class="calibre2">关于视频和音频编解码器的内容超出了本书讨论的范围。作者在此只想告诉大家，不同的浏览器支持不同的编解码器，因此一般来说指定多种格式的媒体来源是必需的。支持这两个媒体元素的浏览器有IE9+、Firefox 3.5+、Safari 4+、Opera 10.5+、Chrome、iOS版Safari和Android版WebKit。</p>

  <h3 class="calibre22" id="sigil_toc_id_191"><strong class="calibre10">16.3.1　属性</strong></h3>

  <p class="calibre2"><code class="calibre15">&lt;video&gt;</code>和<code class="calibre15">&lt;audio&gt;</code>元素都提供了完善的JavaScript接口。下表列出了这两个元素共有的属性，通过这些属性可以知道媒体的当前状态。</p>

  <table class="table">
    <tbody class="calibre23">
      <tr class="calibre24">
        <th class="calibre25" width="25%">属　　性</th>

        <th class="calibre25" width="18%">数据类型</th>

        <th class="calibre25" width="57%">说　　明</th>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">autoplay</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">取得或设置<code class="calibre31">autoplay</code>标志</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">buffered</code></td>

        <td class="calibre27">时间范围</td>

        <td class="calibre27">表示已下载的缓冲的时间范围的对象</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">bufferedBytes</code></td>

        <td class="calibre27">字节范围</td>

        <td class="calibre27">表示已下载的缓冲的字节范围的对象</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">bufferingRate</code></td>

        <td class="calibre27">整数</td>

        <td class="calibre27">下载过程中每秒钟平均接收到的位数</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">bufferingThrottled</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">表示浏览器是否对缓冲进行了节流</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">controls</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">取得或设置<code class="calibre31">controls</code>属性，用于显示或隐藏浏览器内置的控件</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">currentLoop</code></td>

        <td class="calibre27">整数</td>

        <td class="calibre27">媒体文件已经循环的次数</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">currentSrc</code></td>

        <td class="calibre27">字符串</td>

        <td class="calibre27">当前播放的媒体文件的URL</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">currentTime</code></td>

        <td class="calibre27">浮点数</td>

        <td class="calibre27">已经播放的秒数</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">defaultPlaybackRate</code></td>

        <td class="calibre27">浮点数</td>

        <td class="calibre27">取得或设置默认的播放速度。默认值为1.0秒</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">duration</code></td>

        <td class="calibre27">浮点数</td>

        <td class="calibre27">媒体的总播放时间（秒数）</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">ended</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">表示媒体文件是否播放完成</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">loop</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">取得或设置媒体文件在播放完成后是否再从头开始播放</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">muted</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">取得或设置媒体文件是否静音</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">networkState</code></td>

        <td class="calibre27">整数</td>

        <td class="calibre27">表示当前媒体的网络连接状态：0表示空，1表示正在加载，2表示正在加载元数据，3表示已经加载了第一帧，4表示加载完成</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">paused</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">表示播放器是否暂停</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">playbackRate</code></td>

        <td class="calibre27">浮点数</td>

        <td class="calibre27">取得或设置当前的播放速度。用户可以改变这个值，让媒体播放速度变快或变慢，这与<code class="calibre31">defaultPlaybackRate</code>只能由开发人员修改的<code class="calibre31">defaultPlaybackRate</code>不同</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">played</code></td>

        <td class="calibre27">时间范围</td>

        <td class="calibre27">到目前为止已经播放的时间范围</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">readyState</code></td>

        <td class="calibre27">整数</td>

        <td class="calibre27">表示媒体是否已经就绪（可以播放了）。0表示数据不可用，1表示可以显示当前帧，2表示可以开始播放，3表示媒体可以从头到尾播放</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">seekable</code></td>

        <td class="calibre27">时间范围</td>

        <td class="calibre27">可以搜索的时间范围</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">seeking</code></td>

        <td class="calibre27">布尔值</td>

        <td class="calibre27">表示播放器是否正移动到媒体文件中的新位置</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">src</code></td>

        <td class="calibre27">字符串</td>

        <td class="calibre27">媒体文件的来源。任何时候都可以重写这个属性</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">start</code></td>

        <td class="calibre27">浮点数</td>

        <td class="calibre27">取得或设置媒体文件中开始播放的位置，以秒表示</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">totalBytes</code></td>

        <td class="calibre27">整数</td>

        <td class="calibre27">当前资源所需的总字节数</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">videoHeight</code></td>

        <td class="calibre27">整数</td>

        <td class="calibre27">返回视频（不一定是元素）的高度。只适用于<code class="calibre31">&lt;video&gt;</code></td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">videoWidth</code></td>

        <td class="calibre27">整数</td>

        <td class="calibre27">返回视频（不一定是元素）的宽度。只适用于<code class="calibre31">&lt;video&gt;</code></td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">volume</code></td>

        <td class="calibre27">浮点数</td>

        <td class="calibre27">取得或设置当前音量，值为0.0到1.0</td>
      </tr>
    </tbody>
  </table>

  <p class="calibre2">其中很多属性也可以直接在<code class="calibre15">&lt;audio&gt;</code>和<code class="calibre15">&lt;video&gt;</code>元素中设置。</p>

  <h3 class="calibre22" id="sigil_toc_id_192"><strong class="calibre10">16.3.2　事件</strong></h3>

  <p class="calibre2">除了大量属性之外，这两个媒体元素还可以触发很多事件。这些事件监控着不同的属性的变化，这些变化可能是媒体播放的结果，也可能是用户操作播放器的结果。下表列出了媒体元素相关的事件。</p>

  <table class="table">
    <tbody class="calibre23">
      <tr class="calibre24">
        <th class="calibre25" width="25%">事　　件</th>

        <th class="calibre25" width="75%">触发时机</th>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">abort</code></td>

        <td class="calibre27">下载中断</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">canplay</code></td>

        <td class="calibre27">可以播放时；<code class="calibre31">readyState</code>值为2</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">canplaythrough</code></td>

        <td class="calibre27">播放可继续，而且应该不会中断；<code class="calibre31">readyState</code>值为3</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">canshowcurrentframe</code></td>

        <td class="calibre27">当前帧已经下载完成；<code class="calibre31">readyState</code>值为1</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">dataunavailable</code></td>

        <td class="calibre27">因为没有数据而不能播放；<code class="calibre31">readyState</code>值为0</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">durationchange</code></td>

        <td class="calibre27"><code class="calibre31">duration</code>属性的值改变</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">emptied</code></td>

        <td class="calibre27">网络连接关闭</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">empty</code></td>

        <td class="calibre27">发生错误阻止了媒体下载</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">ended</code></td>

        <td class="calibre27">媒体已播放到末尾，播放停止</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">error</code></td>

        <td class="calibre27">下载期间发生网络错误</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">load</code></td>

        <td class="calibre27">所有媒体已加载完成。这个事件可能会被废弃，建议使用<code class="calibre31">canplaythrough</code></td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">loadeddata</code></td>

        <td class="calibre27">媒体的第一帧已加载完成</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">loadedmetadata</code></td>

        <td class="calibre27">媒体的元数据已加载完成</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">loadstart</code></td>

        <td class="calibre27">下载已开始</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">pause</code></td>

        <td class="calibre27">播放已暂停</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">play</code></td>

        <td class="calibre27">媒体已接收到指令开始播放</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">playing</code></td>

        <td class="calibre27">媒体已实际开始播放</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">progress</code></td>

        <td class="calibre27">正在下载</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">ratechange</code></td>

        <td class="calibre27">播放媒体的速度改变</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">seeked</code></td>

        <td class="calibre27">搜索结束</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">seeking</code></td>

        <td class="calibre27">正移动到新位置</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">stalled</code></td>

        <td class="calibre27">浏览器尝试下载，但未接收到数据</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">timeupdate</code></td>

        <td class="calibre27"><code class="calibre31">currentTime</code>被以不合理或意外的方式更新</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27"><code class="calibre31">volumechange</code></td>

        <td class="calibre27"><code class="calibre31">volume</code>属性值或<code class="calibre31">muted</code>属性值已改变</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27"><code class="calibre31">waiting</code></td>

        <td class="calibre27">播放暂停，等待下载更多数据</td>
      </tr>
    </tbody>
  </table>

  <p class="calibre2">这些事件之所以如此具体，就是为了让开发人员只使用少量HTML和JavaScript（与创建Flash影片相比）即可编写出自定义的音频/视频播放器。</p>

  <h3 class="calibre22" id="sigil_toc_id_193"><strong class="calibre10">16.3.3　自定义媒体播放器</strong></h3>

  <p class="calibre2">使用<code class="calibre15">&lt;audio&gt;</code>和<code class="calibre15">&lt;video&gt;</code>元素的<code class="calibre15">play()</code>和<code class="calibre15">pause()</code>方法，可以手工控制媒体文件的播放。组合使用属性、事件和这两个方法，很容易创建一个自定义的媒体播放器，如下面的例子所示。</p>

  <p class="p-img"><img alt="" class="calibre17" src="../Images/00003.gif" /></p>
  <pre class="calibre18"><code class="calibre15">&lt;div class="mediaplayer"&gt; 
    &lt;div class="video"&gt;
        &lt;video id="player" src="movie.mov" poster="mymovie.jpg"
               width="300" height="200"&gt;
            Video player not available.
        &lt;/video&gt;
    &lt;/div&gt;
    &lt;div class="controls"&gt;
        &lt;input type="button" value="Play" id="video-btn"&gt;
        &lt;span id="curtime"&gt;0&lt;/span&gt;/&lt;span id="duration"&gt;0&lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

  <p class="calibre8"><i class="calibre7">VideoPlayerExample01.htm</i></p>

  <p class="calibre2">以上基本的HTML再加上一些JavaScript就可以变成一个简单的视频播放器。以下就是JavaScript代码。</p>
  <pre class="calibre18"><code class="calibre15">//取得元素的引用
var player = document.getElementById("player"),
    btn = document.getElementById("video-btn"),
    curtime = document.getElementById("curtime"),
    duration = document.getElementById("duration");

//更新播放时间
duration.innerHTML = player.duration;

//为按钮添加事件处理程序
EventUtil.addHandler(btn, "click", function(event){
    if (player.paused){
        player.play();
        btn.value = "Pause";
    } else {
        player.pause();
        btn.value = "Play";
    }
});

//定时更新当前时间
setInterval(function(){
    curtime.innerHTML = player.currentTime;
}, 250);
</code></pre>

  <p class="calibre8"><i class="calibre7">VideoPlayerExample01.htm</i></p>

  <p class="calibre2">以上JavaScript代码给按钮添加了一个事件处理程序，单击它能让视频在暂停时播放，在播放时暂停。通过<code class="calibre15">&lt;video&gt;</code>元素的<code class="calibre15">load</code>事件处理程序，设置了加载完视频后显示播放时间。最后，设置了一个计时器，以更新当前显示的时间。你可以进一步扩展这个视频播放器，监听更多事件，利用更多属性。而同样的代码也可以用于<code class="calibre15">&lt;audio&gt;</code>元素，以创建自定义的音频播放器。</p>

  <h3 class="calibre22" id="sigil_toc_id_194"><strong class="calibre10">16.3.4　检测编解码器的支持情况</strong></h3>

  <p class="calibre2">如前所述，并非所有浏览器都支持<code class="calibre15">&lt;video&gt;</code>和<code class="calibre15">&lt;audio&gt;</code>的所有编解码器，而这基本上就意味着你必须提供多个媒体来源。不过，也有一个JavaScript API能够检测浏览器是否支持某种格式和编解码器。这两个媒体元素都有一个<code class="calibre15">canPlayType()</code>方法，该方法接收一种格式/编解码器字符串，返回<code class="calibre15">"probably"</code>、<code class="calibre15">"maybe"</code>或<code class="calibre15">""</code>（ 空字符串）。空字符串是假值，因此可以像下面这样在<code class="calibre15">if</code>语句中使用<code class="calibre15">canPlayType()</code>：</p>
  <pre class="calibre18"><code class="calibre15">if (audio.canPlayType("audio/mpeg")){
    //进一步处理
}
</code></pre>

  <p class="calibre2">而<code class="calibre15">"probably"</code>和<code class="calibre15">"maybe"</code>都是真值，因此在<code class="calibre15">if</code>语句的条件测试中可以转换成<code class="calibre15">true</code>。</p>

  <p class="calibre2">如果给<code class="calibre15">canPlayType()</code>传入了一种MIME类型，则返回值很可能是<code class="calibre15">"maybe"</code>或空字符串。这是因为媒体文件本身只不过是音频或视频的一个容器，而真正决定文件能否播放的还是编码的格式。在同时传入MIME类型和编解码器的情况下，可能性就会增加，返回的字符串会变成<code class="calibre15">"probably"</code>。下面来看几个例子。</p>
  <pre class="calibre18"><code class="calibre15">var audio = document.getElementById("audio-player");

//很可能"maybe"
if (audio.canPlayType("audio/mpeg")){
    //进一步处理
}

//可能是"probably"
if (audio.canPlayType("audio/ogg; codecs=\"vorbis\"")){
    //进一步处理
}
</code></pre>

  <p class="calibre2">注意，编解码器必须用引号引起来才行。下表列出了已知的已得到支持的音频格式和编解码器。</p>

  <table class="table">
    <tbody class="calibre23">
      <tr class="calibre24">
        <th class="calibre25" width="15%">音　　频</th>

        <th class="calibre25" width="42.5%">字　符　串</th>

        <th class="calibre25" width="42.5%">支持的浏览器</th>
      </tr>

      <tr class="calibre26">
        <td class="calibre27">AAC</td>

        <td class="calibre27"><code class="calibre31">audio/mp4; codecs="mp4a.40.2"</code></td>

        <td class="calibre27">IE9+、Safari 4+、iOS版Safari</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27">MP3</td>

        <td class="calibre27"><code class="calibre31">audio/mpeg</code></td>

        <td class="calibre27">IE9+、Chrome</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27">Vorbis</td>

        <td class="calibre27"><code class="calibre31">audio/ogg; codecs="vorbis"</code></td>

        <td class="calibre27">Firefox 3.5+、Chrome、Opera 10.5+</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27">WAV</td>

        <td class="calibre27"><code class="calibre31">audio/wav; codecs="1"</code></td>

        <td class="calibre27">Firefox 3.5+、Opera 10.5+、Chrome</td>
      </tr>
    </tbody>
  </table>

  <p class="calibre2">当然，也可以使用<code class="calibre15">canPlayType()</code>来检测视频格式。下表列出了已知的已得到支持的音频格式和编解码器。</p>

  <table class="table">
    <tbody class="calibre23">
      <tr class="calibre24">
        <th class="calibre25" width="15%">视　　频</th>

        <th class="calibre25" width="42.5%">字　符　串</th>

        <th class="calibre25" width="42.5%">支持的浏览器</th>
      </tr>

      <tr class="calibre26">
        <td class="calibre27">H.264</td>

        <td class="calibre27"><code class="calibre31">video/mp4; codecs="avc1.42E01E, mp4a.40.2"</code></td>

        <td class="calibre27">IE9+、Safari 4+、iOS版Safari、Android版WebKit</td>
      </tr>

      <tr class="calibre24">
        <td class="calibre27">Theora</td>

        <td class="calibre27"><code class="calibre31">video/ogg; codecs="theora"</code></td>

        <td class="calibre27">Firefox 3.5+、Opera 10.5、Chrome</td>
      </tr>

      <tr class="calibre26">
        <td class="calibre27">WebM</td>

        <td class="calibre27"><code class="calibre31">video/webm; codecs="vp8, vorbis"</code></td>

        <td class="calibre27">Firefox 4+、Opera 10.6、Chrome</td>
      </tr>
    </tbody>
  </table>

  <h3 class="calibre22" id="sigil_toc_id_195"><strong class="calibre10">16.3.5　<code class="calibre30">Audio</code>类型</strong></h3>

  <p class="calibre2"><code class="calibre15">&lt;audio&gt;</code>元素还有一个原生的JavaScript构造函数<code class="calibre15">Audio</code>，可以在任何时候播放音频。从同为DOM元素的角度看，<code class="calibre15">Audio</code>与<code class="calibre15">Image</code>很相似，但<code class="calibre15">Audio</code>不用像<code class="calibre15">Image</code>那样必须插入到文档中。只要创建一个新实例，并传入音频源文件即可。</p>
  <pre class="calibre18"><code class="calibre15">var audio = new Audio("sound.mp3");
EventUtil.addHandler(audio, "canplaythrough", function(event){
    audio.play();
}); 
</code></pre>

  <p class="calibre2">创建新的<code class="calibre15">Audio</code>实例即可开始下载指定的文件。下载完成后，调用<code class="calibre15">play()</code>就可以播放音频。</p>

  <p class="calibre2">在iOS中，调用<code class="calibre15">play()</code>时会弹出一个对话框，得到用户的许可后才能播放声音。如果想在一段音频播放后再播放另一段音频，必须在<code class="calibre15">onfinish</code>事件处理程序中调用<code class="calibre15">play()</code>方法。</p>
</body>
</html>
